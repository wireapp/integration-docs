# `onAssetMessageReceived`

Triggers when a new asset (such as an image, video, or audio file) arrives in a conversation.  
Use it to handle, store, or process received media.

## Received properties

Apart from [Base, Ephemeral, and Replyable properties](01-message-model.md),
a `WireMessage.Asset` object contains the following fields:

| Name          | Description                                                                  |
|---------------|------------------------------------------------------------------------------|
| `sizeInBytes` | File size in bytes.                                                          |
| `name`        | Original file name, if available.                                            |
| `mimeType`    | File’s MIME type. Determines supported asset category (image, audio, video). |

### `metadata`

Each asset type includes additional metadata:
 - Image – width and height in pixels.
 - Video – width, height, and duration in milliseconds.
 - Audio – duration and normalized loudness.

### `remoteData`

Data needed to download and decrypt the asset.

Receiving an `onAsset` event does not mean you have received the file itself.
The asset must be downloaded separately using the `remoteData` field.

You can pass the `AssetRemoteData` object directly to the `downloadAsset`/`downloadAssetSuspending` method to retrieve the asset as a byte array.

## Sample usage

### Download received asset

```mdx-code-block
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
```

<Tabs groupId="programming-language">
<TabItem value="kotlin" label="Kotlin">

```kotlin
override suspend fun onAssetMessageReceived(wireMessage: WireMessage.Asset) {
    wireMessage.remoteData?.let { remoteData ->
        val asset = manager.downloadAssetSuspending(remoteData)
        val fileName = wireMessage.name ?: "unknown"
        val outputDir = File("build/downloaded_assets").apply { mkdirs() }
        val outputFile = File(outputDir, fileName)
        outputFile.writeBytes(asset.value)
    }
}
```

</TabItem>

<TabItem value="java" label="Java">

```java
@Override
public void onAssetMessageReceived(WireMessage.Asset wireMessage) {
    WireMessage.Asset.RemoteData remoteData = wireMessage.remoteData();
    if (remoteData != null) {
        byte[] asset = getManager().downloadAsset(remoteData);

        String fileName = wireMessage.name();
        if (fileName == null || fileName.trim().isEmpty()) {
            fileName = "unknown";
        }

        File outputDir = new File("build/downloaded_assets");
        outputDir.mkdirs();

        File outputFile = new File(outputDir, fileName);
        try {
            Files.write(outputFile.toPath(), asset);
        } catch (IOException e) {
            System.out.println("Failed to write asset to file: " + e);
        }
    }
}
```
</TabItem>
</Tabs>
